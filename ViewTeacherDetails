package University_Management;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;

public class ViewTeacherDetails extends JFrame implements ActionListener {
    JLabel l1, l2;
    JPanel p1, p2, p3;
    JButton bt1;
    JTextField tf1;
    Font f, f1;
    String x[] = {
            "Name", "Username", "Email", "Phone", "Gender",
            "Blood Group", "Teaching Experience", "Qualifications", "Date of Birth"
    };
    String y[][] = new String[20][9];  // 9 columns used
    int i = 0, j = 0;
    JTable t;

    ViewTeacherDetails() {
        super("Teacher Information");
        setSize(1500, 500);
        setLocation(1, 1);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        f = new Font("Arial", Font.BOLD, 15);

        try {
            ConnectionClass obj = new ConnectionClass();
            String q = "SELECT * FROM teacher";
            ResultSet rest = obj.stm.executeQuery(q);

            while (rest.next() && i < 20) {
                y[i][j++] = rest.getString("name");
                y[i][j++] = rest.getString("username");
                y[i][j++] = rest.getString("email");
                y[i][j++] = rest.getString("phone");
                y[i][j++] = rest.getString("gender");
                y[i][j++] = rest.getString("blood");
                y[i][j++] = rest.getString("teachingexp");
                y[i][j++] = rest.getString("qualifications");
                y[i][j++] = rest.getString("dob");
                i++;
                j = 0;
            }

            t = new JTable(y, x);
            t.setFont(f);
            t.setBackground(Color.BLACK);
            t.setForeground(Color.WHITE);
            JScrollPane sp = new JScrollPane(t);
            add(sp, BorderLayout.CENTER); 

            
            f1 = new Font("Lucida Fax", Font.BOLD, 20);
            l1 = new JLabel("Delete any Teacher Database table row?");
            l1.setHorizontalAlignment(JLabel.CENTER);
            l1.setForeground(Color.YELLOW);
            l1.setFont(f1);

            l2 = new JLabel("Teacher Username");
            l2.setFont(f1);
            l2.setForeground(Color.GRAY);

            tf1 = new JTextField();
            bt1 = new JButton("Delete Teacher Record");
            bt1.addActionListener(this);
            bt1.setBackground(Color.BLACK);
            bt1.setForeground(Color.RED);

            p1 = new JPanel(new GridLayout(1, 1, 10, 10));
            p1.add(l1);

            p2 = new JPanel(new GridLayout(1, 3, 10, 10));
            p2.add(l2);
            p2.add(tf1);
            p2.add(bt1);

            p3 = new JPanel(new GridLayout(2, 1, 10, 10));
            p3.add(p1);
            p3.add(p2);
            p1.setBackground(Color.BLACK);
            p2.setBackground(Color.BLACK);
            p3.setBackground(Color.BLACK);

            add(p3, "South");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == bt1) {
            String username = tf1.getText().trim();
            if (username.isEmpty()) {
                JOptionPane.showMessageDialog(null, "Please enter a username.");
                return;
            }
            try {
                ConnectionClass obj = new ConnectionClass();
                String q = "DELETE FROM teacher WHERE username = '" + username + "'";
                int res = obj.stm.executeUpdate(q);
                if (res == 1) {
                    JOptionPane.showMessageDialog(null, "Teacher record deleted successfully.");
                    setVisible(false);
                    new ViewTeacherDetails().setVisible(true); 
                } else {
                    JOptionPane.showMessageDialog(null, "No record found with that username.");
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        new ViewTeacherDetails().setVisible(true);
    }
}

